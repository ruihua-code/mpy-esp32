from micropython import const

html = const('''<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=no"/><title>WiFi配置</title><style>:root{--bg-color:#fff;--main-color:#3388ff;}html,body{padding:10px;margin:0;background-color:var(--bg-color);font-size:16px;overflow:hidden;}*{box-sizing:border-box;}#form{display:flex;flex-direction:column;row-gap:10px;}#ssid,#password{height:45px;line-height:45px;outline-color:var(--main-color);padding:4px;font-size:16px;border-style:solid;border-color:#dfdfdf;outline:none;}.btn-send{display:flex;padding:10px 30px;background-color:var(--main-color);border:1px solid;color:#fff;margin:0 auto;}</style></head><body><form id="form"><input type="text" placeholder="SSID" id="ssid"/><input type="password" placeholder="密码" id="password"/><button id="btn-send" class="btn-send">确认</button></form><script>document.getElementById('form').addEventListener('submit',async(e)=>{e.preventDefault();const ssid=document.getElementById('ssid');const password=document.getElementById('password');const ssidValue=ssid.value.trim();const passwordValue=password.value.trim();if(!ssidValue||!passwordValue){alert('请输入SSID和密码');return;}ssid.disabled=true;password.disabled=true;try{const res=await fetch('/setWifi',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({ssid:ssidValue,password:passwordValue}),});const json=await res.json();if(json.isSuccess){ssid.value='';password.value='';alert('配置成功');}else{alert('配置失败');}}catch(error){alert('请求失败，请重试');}finally{ssid.disabled=false;password.disabled=false;}});</script></body></html>''')
